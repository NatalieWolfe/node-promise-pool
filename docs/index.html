<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3>generic-promise-pool 1.1.0</h3>










    




    <section>
        <article><h1>Promise Pool <a href="https://travis-ci.org/NatalieWolfe/node-promise-pool"><img src="https://travis-ci.org/NatalieWolfe/node-promise-pool.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/r/NatalieWolfe/node-promise-pool"><img src="https://coveralls.io/repos/NatalieWolfe/node-promise-pool/badge.svg" alt="Coverage Status"></a></h1><p>Promise-based connection pooling library inspired by generic-pool.</p>
<h2>Installation</h2><pre class="prettyprint source lang-sh"><code>$ npm install generic-promise-pool</code></pre><h2>Examples</h2><h3>Creating a Pool</h3><p>This example creates a pool that uses a hypothetical promise-based MySQL library.</p>
<pre class="prettyprint source lang-js"><code>var mysql = require('promise-mysql');
var pool = require('generic-promise-pool');

var mysqlPool = pool.create({
    name    : 'mysql',  // An optional name for the pool.
    max     : 10,       // Optional limit for how many connections to allow.
    min     : 2,        // Optional minimum connections to keep in the pool.
    create  : function(){
        var conn = mysql.createConnection(mysqlConnOptions);
        return conn.connect();
    },
    destroy : function(conn){
        return conn.end();
    }
});</code></pre><p>For a full list of options that the <code>PromisePool</code> accepts, see the documentation on GitHub:
http://NatalieWolfe.github.io/node-promise-pool/docs/PromisePool.Factory.html</p>
<h3>Using the Pool</h3><p>In this example we get a connection from the pool and use it to make a query.</p>
<pre class="prettyprint source lang-js"><code>mysqlPool.acquire(function(conn){
    // The connection remains acquired until the promise returned by this
    // function is resolved or rejected.
    return conn.query('SELECT * FROM books WHERE author = &quot;Neal Stephenson&quot;');
}).then(function(res){
    // The connection has been released back to the pool before we get here,
    // and the results from the acquire callback is propagated out.
    res.forEach(function(row){ console.dir(row); });
}, function(err){
    console.error(err);
});</code></pre><h3>Draining the Pool</h3><p>When you want to shut down your application, it can be quite annoying to wait for idle connections
to close naturally. To get past this, drain the pool before shutting down.</p>
<pre class="prettyprint source lang-js"><code>mysqlPool.drain()
    .then(function(){
        console.log('The pool has drained, and all connections destroyed.');
    });</code></pre></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="PromisePool.html">PromisePool</a></li></ul><h3>Namespaces</h3><ul><li><a href="exports.html">exports</a></li><li><a href="PromisePool.Factory.html">Factory</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Tue Aug 25 2015 15:34:56 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>